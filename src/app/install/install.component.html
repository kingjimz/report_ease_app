<div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-2xl w-full">
    <!-- Header -->
    <div class="text-center mb-8">
      <div class="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl mb-4 shadow-lg">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="7 10 12 15 17 10"></polyline>
          <line x1="12" y1="15" x2="12" y2="3"></line>
        </svg>
      </div>
      <h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-2">
        Install Field Service Tracker
      </h1>
      <p class="text-lg text-gray-600 dark:text-gray-400">
        Get quick access to your app from your home screen
      </p>
    </div>

    <!-- Already Installed Message -->
    <div *ngIf="isStandalone" class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-6 mb-6">
      <div class="flex items-start">
        <div class="flex-shrink-0">
          <svg class="h-6 w-6 text-green-600 dark:text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
        <div class="ml-3 flex-1">
          <h3 class="text-lg font-semibold text-green-800 dark:text-green-300 mb-1">
            App Already Installed!
          </h3>
          <p class="text-green-700 dark:text-green-400">
            You're currently using the installed version of the app. Enjoy quick access from your home screen!
          </p>
        </div>
      </div>
      <button
        (click)="navigateToLogin()"
        class="mt-4 w-full sm:w-auto px-6 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition duration-200"
      >
        Go to Login
      </button>
    </div>

    <!-- Installation Instructions -->
    <div *ngIf="!isStandalone" class="space-y-6">
      <!-- Desktop Installation (Chrome, Edge, etc.) -->
      <div *ngIf="isDesktop && canInstall" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700">
        <div class="flex items-start mb-4">
          <div class="flex-shrink-0">
            <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-600 dark:text-blue-400">
                <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                <line x1="8" y1="21" x2="16" y2="21"></line>
                <line x1="12" y1="17" x2="12" y2="21"></line>
              </svg>
            </div>
          </div>
          <div class="ml-4 flex-1">
            <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">
              Install on Desktop
            </h3>
            <p class="text-gray-600 dark:text-gray-400 mb-4">
              Click the button below to install the app on your computer. You'll be able to launch it like a regular application.
            </p>
            <button
              (click)="installApp()"
              [disabled]="isInstalling"
              class="w-full sm:w-auto px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-semibold rounded-lg hover:from-blue-600 hover:to-indigo-700 transition duration-300 shadow-md disabled:opacity-50 disabled:cursor-not-allowed"
            >
              <span class="flex items-center justify-center gap-2">
                <svg *ngIf="!isInstalling" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                  <polyline points="7 10 12 15 17 10"></polyline>
                  <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
                <svg *ngIf="isInstalling" class="animate-spin" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="12" y1="2" x2="12" y2="6"></line>
                  <line x1="12" y1="18" x2="12" y2="22"></line>
                  <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                  <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                  <line x1="2" y1="12" x2="6" y2="12"></line>
                  <line x1="18" y1="12" x2="22" y2="12"></line>
                  <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                  <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
                </svg>
                <span>{{ isInstalling ? 'Installing...' : 'Install App' }}</span>
              </span>
            </button>
            <p *ngIf="installError" class="mt-4 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3">
              {{ installError }}
            </p>
          </div>
        </div>
      </div>

      <!-- Desktop Manual Instructions -->
      <div *ngIf="isDesktop && !canInstall" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700">
        <div class="flex items-start mb-4">
          <div class="flex-shrink-0">
            <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-600 dark:text-blue-400">
                <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                <line x1="8" y1="21" x2="16" y2="21"></line>
                <line x1="12" y1="17" x2="12" y2="21"></line>
              </svg>
            </div>
          </div>
          <div class="ml-4 flex-1">
            <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">
              Install on Desktop
            </h3>
            <div class="space-y-3 text-gray-600 dark:text-gray-400">
              <div class="flex items-start">
                <span class="flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center text-sm font-semibold mr-3 mt-0.5">1</span>
                <p>Look for the install icon in your browser's address bar (usually on the right side)</p>
              </div>
              <div class="flex items-start">
                <span class="flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center text-sm font-semibold mr-3 mt-0.5">2</span>
                <p>Click the install icon or look for "Install" in the browser menu</p>
              </div>
              <div class="flex items-start">
                <span class="flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center text-sm font-semibold mr-3 mt-0.5">3</span>
                <p>Confirm the installation when prompted</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- iOS Installation Instructions -->
      <div *ngIf="isIOS" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 sm:p-8 border border-gray-200 dark:border-gray-700">
        <div class="mb-6">
          <div class="flex items-center mb-4">
            <div class="w-14 h-14 sm:w-16 sm:h-16 bg-gradient-to-br from-gray-500 to-gray-600 rounded-2xl flex items-center justify-center shadow-lg mr-4">
              <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="currentColor" class="text-white">
                <path d="M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.96-3.24-1.44-1.78-.72-2.66-1.1-2.66-2.1 0-.5.17-.9.5-1.2.33-.3.75-.45 1.25-.45.5 0 1.05.15 1.65.45.6.3 1.2.6 1.8.9.6.3 1.2.6 1.8.9.6.3 1.15.45 1.65.45.5 0 .92-.15 1.25-.45.33-.3.5-.7.5-1.2 0-1-.88-1.38-2.66-2.1-1.16-.48-2.15-.94-3.24-1.44-1.03-.48-2.1-.55-3.08.4-.98.95-.88 2.05-.4 3.08.5 1.09.96 2.08 1.44 3.24.72 1.78 1.1 2.66 2.1 2.66.5 0 .9-.17 1.2-.5.3-.33.45-.75.45-1.25 0-.5-.15-1.05-.45-1.65-.3-.6-.6-1.2-.9-1.8-.3-.6-.6-1.2-.9-1.8-.3-.6-.45-1.15-.45-1.65 0-.5.15-.92.5-1.25.33-.33.7-.5 1.2-.5 1 0 1.38.88 2.1 2.66.48 1.16.94 2.15 1.44 3.24.48 1.03.55 2.1-.4 3.08z"/>
              </svg>
            </div>
            <div>
              <h3 class="text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-1">
                Install on iPhone/iPad
              </h3>
              <p class="text-sm sm:text-base text-gray-500 dark:text-gray-400">
                Add to your home screen in Safari
              </p>
            </div>
          </div>
        </div>

        <div class="space-y-4 mb-6">
          <div class="bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700/50 dark:to-gray-700/30 p-5 sm:p-6 rounded-xl border border-gray-200 dark:border-gray-600">
            <div class="flex items-start">
              <div class="flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center text-white font-bold text-lg sm:text-xl shadow-md mr-4">
                1
              </div>
              <div class="flex-1 min-w-0">
                <h4 class="font-bold text-lg sm:text-xl text-gray-900 dark:text-white mb-2">Tap the Share Button</h4>
                <p class="text-gray-700 dark:text-gray-300 text-sm sm:text-base leading-relaxed">
                  Look for the <strong class="text-gray-900 dark:text-white">Share</strong> icon 
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block ml-1 text-gray-600 dark:text-gray-400">
                    <circle cx="18" cy="5" r="3"></circle>
                    <circle cx="6" cy="12" r="3"></circle>
                    <circle cx="18" cy="19" r="3"></circle>
                    <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                    <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                  </svg> 
                  at the bottom center of your Safari browser
                </p>
              </div>
            </div>
          </div>

          <div class="bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700/50 dark:to-gray-700/30 p-5 sm:p-6 rounded-xl border border-gray-200 dark:border-gray-600">
            <div class="flex items-start">
              <div class="flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center text-white font-bold text-lg sm:text-xl shadow-md mr-4">
                2
              </div>
              <div class="flex-1 min-w-0">
                <h4 class="font-bold text-lg sm:text-xl text-gray-900 dark:text-white mb-2">Select "Add to Home Screen"</h4>
                <p class="text-gray-700 dark:text-gray-300 text-sm sm:text-base leading-relaxed">
                  Scroll down in the share menu and tap <strong class="text-gray-900 dark:text-white">"Add to Home Screen"</strong>
                </p>
              </div>
            </div>
          </div>

          <div class="bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700/50 dark:to-gray-700/30 p-5 sm:p-6 rounded-xl border border-gray-200 dark:border-gray-600">
            <div class="flex items-start">
              <div class="flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center text-white font-bold text-lg sm:text-xl shadow-md mr-4">
                3
              </div>
              <div class="flex-1 min-w-0">
                <h4 class="font-bold text-lg sm:text-xl text-gray-900 dark:text-white mb-2">Confirm Installation</h4>
                <p class="text-gray-700 dark:text-gray-300 text-sm sm:text-base leading-relaxed">
                  Tap <strong class="text-gray-900 dark:text-white">"Add"</strong> in the top right corner to complete the installation
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 rounded-lg p-4 sm:p-5">
          <div class="flex items-start">
            <svg class="w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
            </svg>
            <p class="text-sm sm:text-base text-blue-800 dark:text-blue-300 leading-relaxed">
              <strong>Important:</strong> Make sure you're using <strong>Safari browser</strong>. This feature is not available in Chrome or other browsers on iOS.
            </p>
          </div>
        </div>
      </div>

      <!-- Android Installation Instructions -->
      <div *ngIf="isAndroid && !canInstall" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700">
        <div class="flex items-start mb-4">
          <div class="flex-shrink-0">
            <div class="w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="text-green-600 dark:text-green-400">
                <path d="M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.96-3.24-1.44-1.78-.72-2.66-1.1-2.66-2.1 0-.5.17-.9.5-1.2.33-.3.75-.45 1.25-.45.5 0 1.05.15 1.65.45.6.3 1.2.6 1.8.9.6.3 1.2.6 1.8.9.6.3 1.15.45 1.65.45.5 0 .92-.15 1.25-.45.33-.3.5-.7.5-1.2 0-1-.88-1.38-2.66-2.1-1.16-.48-2.15-.94-3.24-1.44-1.03-.48-2.1-.55-3.08.4-.98.95-.88 2.05-.4 3.08.5 1.09.96 2.08 1.44 3.24.72 1.78 1.1 2.66 2.1 2.66.5 0 .9-.17 1.2-.5.3-.33.45-.75.45-1.25 0-.5-.15-1.05-.45-1.65-.3-.6-.6-1.2-.9-1.8-.3-.6-.6-1.2-.9-1.8-.3-.6-.45-1.15-.45-1.65 0-.5.15-.92.5-1.25.33-.33.7-.5 1.2-.5 1 0 1.38.88 2.1 2.66.48 1.16.94 2.15 1.44 3.24.48 1.03.55 2.1-.4 3.08z"/>
              </svg>
            </div>
          </div>
          <div class="ml-4 flex-1">
            <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">
              Install on Android
            </h3>
            <div class="space-y-3 text-gray-600 dark:text-gray-400">
              <div class="flex items-start">
                <span class="flex-shrink-0 w-6 h-6 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-full flex items-center justify-center text-sm font-semibold mr-3 mt-0.5">1</span>
                <p>Look for the <strong>"Add to Home Screen"</strong> or <strong>"Install App"</strong> banner at the top or bottom of your browser</p>
              </div>
              <div class="flex items-start">
                <span class="flex-shrink-0 w-6 h-6 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-full flex items-center justify-center text-sm font-semibold mr-3 mt-0.5">2</span>
                <p>Tap the banner or menu icon (three dots) and select <strong>"Add to Home Screen"</strong> or <strong>"Install App"</strong></p>
              </div>
              <div class="flex items-start">
                <span class="flex-shrink-0 w-6 h-6 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-full flex items-center justify-center text-sm font-semibold mr-3 mt-0.5">3</span>
                <p>Confirm the installation when prompted</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Android Direct Install Button -->
      <div *ngIf="isAndroid && canInstall" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700">
        <div class="flex flex-col items-center text-center">
          <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center mb-4 shadow-lg">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor" class="text-white">
              <path d="M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.96-3.24-1.44-1.78-.72-2.66-1.1-2.66-2.1 0-.5.17-.9.5-1.2.33-.3.75-.45 1.25-.45.5 0 1.05.15 1.65.45.6.3 1.2.6 1.8.9.6.3 1.2.6 1.8.9.6.3 1.15.45 1.65.45.5 0 .92-.15 1.25-.45.33-.3.5-.7.5-1.2 0-1-.88-1.38-2.66-2.1-1.16-.48-2.15-.94-3.24-1.44-1.03-.48-2.1-.55-3.08.4-.98.95-.88 2.05-.4 3.08.5 1.09.96 2.08 1.44 3.24.72 1.78 1.1 2.66 2.1 2.66.5 0 .9-.17 1.2-.5.3-.33.45-.75.45-1.25 0-.5-.15-1.05-.45-1.65-.3-.6-.6-1.2-.9-1.8-.3-.6-.6-1.2-.9-1.8-.3-.6-.45-1.15-.45-1.65 0-.5.15-.92.5-1.25.33-.33.7-.5 1.2-.5 1 0 1.38.88 2.1 2.66.48 1.16.94 2.15 1.44 3.24.48 1.03.55 2.1-.4 3.08z"/>
            </svg>
          </div>
          <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">
            Install on Android
          </h3>
          <p class="text-gray-600 dark:text-gray-400 mb-6 max-w-md">
            Tap the button below to install the app on your Android device. The installation prompt will appear automatically.
          </p>
          <button
            (click)="installApp()"
            [disabled]="isInstalling"
            class="w-full px-8 py-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold text-lg rounded-xl hover:from-green-600 hover:to-emerald-700 transition duration-300 shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-100 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"
          >
            <span class="flex items-center justify-center gap-2">
              <svg *ngIf="!isInstalling" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
              <svg *ngIf="isInstalling" class="animate-spin" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="12" y1="2" x2="12" y2="6"></line>
                <line x1="12" y1="18" x2="12" y2="22"></line>
                <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                <line x1="2" y1="12" x2="6" y2="12"></line>
                <line x1="18" y1="12" x2="22" y2="12"></line>
                <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
              </svg>
              <span>{{ isInstalling ? 'Installing...' : 'Install App Now' }}</span>
            </span>
          </button>
          <p *ngIf="installError" class="mt-4 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3">
            {{ installError }}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
