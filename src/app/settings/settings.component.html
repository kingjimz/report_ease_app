<div
  class="max-w-2xl mx-auto bg-white rounded-xl p-4 sm:p-8 mt-6 sm:mt-10 lg:mb-6 xl:mb-6"
>
  <h2 class="text-xl sm:text-2xl font-bold mb-1 flex items-center gap-2">
    <i class="bi bi-bullseye text-indigo-500 text-xl sm:text-2xl"></i>
    Spiritual Goals
  </h2>
  <span class="text-gray-600 text-sm max-w-2xl">
    Set and track your spiritual goals.
  </span>
  <form class="space-y-4 sm:space-y-5 mt-3" (ngSubmit)="onSubmit()">
    <div>
      <label
        for="goalTitle"
        class="block text-xs sm:text-sm font-medium text-gray-700 mb-1"
        >Goal Title</label
      >
      <input
        type="text"
        id="goalTitle"
        name="goalTitle"
        [(ngModel)]="goal_title"
        class="w-full px-3 py-2 sm:px-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-400 focus:outline-none text-sm sm:text-base"
        placeholder="Enter your spiritual goal"
      />
    </div>
    <div>
      <label
        for="goalDescription"
        class="block text-xs sm:text-sm font-medium text-gray-700 mb-1"
        >Description</label
      >
      <textarea
        id="goalDescription"
        name="goalDescription"
        [(ngModel)]="goal_description"
        rows="3"
        class="w-full px-3 py-2 sm:px-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-400 focus:outline-none text-sm sm:text-base"
        placeholder="Describe your goal"
      ></textarea>
    </div>
    <div>
      <label
        for="category"
        class="block text-xs sm:text-sm font-medium text-gray-700 mb-1"
        >Category</label
      >
      <select
        id="category"
        name="category"
        [(ngModel)]="category"
        class="w-full px-3 py-2 sm:px-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-400 focus:outline-none text-sm sm:text-base"
      >
        <option value="">Select category</option>
        <option value="ministry">Ministry</option>
        <option value="meetings">Congregation</option>
        <option value="other">Other</option>
      </select>
    </div>
    <div>
      <label
        for="targetDate"
        class="block text-xs sm:text-sm font-medium text-gray-700 mb-1"
        >Target Date</label
      >
      <input
        type="date"
        id="targetDate"
        name="targetDate"
        [(ngModel)]="target_date"
        class="w-full px-3 py-2 sm:px-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-400 focus:outline-none text-sm sm:text-base"
      />
    </div>
    <button
      type="submit"
      class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 rounded-lg transition text-base"
    >
      Add Goal
    </button>
  </form>

  <div class="mt-8 sm:mt-10 mb-8">
    <h3 class="text-base sm:text-lg font-semibold text-gray-800 mb-3 sm:mb-4">
      Your Spiritual Goals
    </h3>
    <div
      *ngIf="goals.length === 0"
      class="text-gray-500 text-sm sm:text-base text-center py-6"
    >
      No goals yet. Add your first spiritual goal!
    </div>
    <div
      *ngFor="let goal of goals"
      class="bg-indigo-50 border border-indigo-200 rounded-lg p-3 sm:p-4 mb-3 sm:mb-4 flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4 shadow-sm relative"
    >
      <!-- Delete icon at top right -->
      <button
        type="button"
        (click)="deleteGoal(goal)"
        class="absolute top-2 right-2 text-gray-400 hover:text-red-600 transition"
        aria-label="Delete goal"
      >
        <i class="bi bi-trash-fill text-lg"></i>
      </button>
      <div class="flex-1 w-full">
        <h4
          class="text-sm sm:text-md font-bold text-indigo-700 sm:mt-0 mb-1 sm:mb-2 order-1 sm:order-none"
        >
          {{ goal.goal_title }}
        </h4>
        <p class="text-gray-700 text-xs sm:text-sm mt-1 sm:mt-0">
          {{ goal.goal_description }}
        </p>
        <small class="text-gray-500 block mt-2 text-xs sm:text-sm"
          >Category:
          <span class="font-medium text-indigo-600">{{
            goal.category
          }}</span></small
        >
        <small class="text-gray-500 block mt-1 text-xs sm:text-sm"
          >Target Date:
          <span class="font-medium text-indigo-600">{{
            goal.target_date
          }}</span></small
        >
      </div>
    </div>
  </div>
</div>
