<!-- Loader -->
<div *ngIf="isLoading" class="flex justify-center items-center min-h-screen">
  <div class="animate-spin rounded-full h-12 w-12 border-t-4 border-blue-500"></div>
</div>

<!-- Calendar (Hidden While Loading) -->
<div *ngIf="!isLoading">
  <div class="flex justify-between items-center mb-4">
    <button (click)="previousMonth()" class="px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400">
      ◀ 
    </button>
    <h2 class="text-xl font-semibold">{{ viewDate | date: 'MMMM yyyy' }}</h2>
    <button (click)="nextMonth()" class="px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400">
      ▶
    </button>
  </div>

  <div class="flex space-x-2 bg-gray-100 p-1 rounded-lg">
    <button 
      (click)="viewMode = 'month'" 
      [class.bg-green-600]="viewMode === 'month'" 
      [class.text-white]="viewMode === 'month'"
      class="px-4 py-2 rounded-lg transition-colors duration-200 text-gray-800 hover:bg-green-500 hover:text-white">
      Month
    </button>
    <button 
      (click)="viewMode = 'week'" 
      [class.bg-green-600]="viewMode === 'week'" 
      [class.text-white]="viewMode === 'week'"
      class="px-4 py-2 rounded-lg transition-colors duration-200 text-gray-800 hover:bg-green-500 hover:text-white">
      Week
    </button>
    <button 
      (click)="viewMode = 'day'" 
      [class.bg-green-600]="viewMode === 'day'" 
      [class.text-white]="viewMode === 'day'"
      class="px-4 py-2 rounded-lg transition-colors duration-200 text-gray-800 hover:bg-green-500 hover:text-white">
      Day
    </button>
  </div>

  <div class="calendar-container">
    <mwl-calendar-month-view *ngIf="viewMode === 'month'"
      [viewDate]="viewDate"
      [events]="events"
      (dayClicked)="dayClicked($event.day)">
    </mwl-calendar-month-view>

    <mwl-calendar-week-view *ngIf="viewMode === 'week'"
      [viewDate]="viewDate"
      [events]="events">
    </mwl-calendar-week-view>

    <mwl-calendar-day-view *ngIf="viewMode === 'day'"
      [viewDate]="viewDate"
      [events]="events">
    </mwl-calendar-day-view>
  </div>
</div>
